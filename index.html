<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AuthsRNG Email Sender</title>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<style>
body { font-family: Arial, sans-serif; background: #f4f4f9; padding: 40px; }
.container { max-width: 900px; margin: auto; background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
h2 { text-align: center; color: #0073e6; }
#editor { border:1px solid #ccc; padding:10px; min-height:200px; outline:none; font-size:15px; width:100%; overflow:auto; }
button.send { margin-top:20px; background:#0073e6; color:white; border:none; padding:12px 20px; border-radius:6px; cursor:pointer; font-size:16px; width:100%; }
button.send:hover { background:#005bb5; }
.status { margin-top:15px; text-align:center; font-size:14px; }
.preview-box { margin-top:25px; padding:20px; border-radius:8px; border:1px solid #ddd; background:#fafafa; }
.preview-header { font-weight:bold; margin-bottom:10px; text-align:center; color:#444; }
.media img, .media video { max-width: 100%; border-radius: 6px; margin-top: 10px; display:block; }
</style>
</head>
<body>

<div class="container">
<h2>üì¢ AuthsRNG Email Sender</h2>
<p>Type your text and paste images/videos directly into the editor below.</p>

<div id="editor" contenteditable="true" placeholder="Type your message here..."></div>

<div class="preview-box">
<div class="preview-header">üì© Live Preview</div>
<div id="preview_content"></div>
</div>

<button class="send" onclick="sendEmails()">Send Email</button>
<div class="status" id="status"></div>
</div>

<script>
// Initialize EmailJS
emailjs.init("pG6ucVR7zX2qahxvm");

const subscribers = [
  { name: "BVP Studios", email: "bvpstudios012@gmail.com" },
  { name: "ChefBoy", email: "chefboy-12@hotmail.com" }
];

const serviceId = "service_h8c2z0w";
const templateId = "template_009nh11";

// Build full HTML template using content from editor
function buildHTMLTemplate(content) {
  return `
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AuthsRNG Update</title>
<style>
body { font-family: Arial, sans-serif; background-color: #f5f5f5; margin:0; padding:0; }
.container { max-width: 600px; margin: auto; background: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.header { background-color: #0073e6; text-align: center; padding: 30px; color: #ffffff; }
.body { padding: 30px; color: #333333; line-height: 1.6; font-size: 15px; }
.button { display: inline-block; text-decoration: none; background-color: #0073e6; color: #ffffff; padding: 12px 24px; border-radius: 6px; font-weight: bold; }
.footer { background-color: #f0f0f0; text-align:center; padding:20px; font-size:12px; color:#777777; }
.media img, .media video { max-width: 100%; border-radius: 6px; margin-top: 10px; display:block; }
</style>
</head>
<body>
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #f5f5f5; padding: 20px 0;">
    <tr>
      <td align="center">
        <div class="container">
          <div class="header"><h1>‚ö° AuthsRNG ‚Äì Update v1.2!</h1></div>
          <div class="body">
            <p>Hello {{{name}}},</p>
            <div class="media">${content}</div>
            <p style="text-align:center; margin:30px 0;">
              <a href="https://authsrng.neocities.org" class="button">Check it out now!</a>
            </p>
            <p>Thanks for being part of the AuthsRNG community!</p>
            <p><strong>BVP Studios Team</strong></p>
          </div>
          <div class="footer">
            You‚Äôre receiving this email because you subscribed to AuthsRNG updates.<br>
            &copy; 2025 AuthsRNG. All rights reserved.
          </div>
        </div>
      </td>
    </tr>
  </table>
</body>
</html>`;
}

// Live preview
const editor = document.getElementById("editor");
const preview = document.getElementById("preview_content");

function updatePreview() {
  const content = editor.innerHTML;
  preview.innerHTML = buildHTMLTemplate(content).replace(/{{{name}}}/g,"Subscriber Name");
}

editor.addEventListener("input", updatePreview);
updatePreview();

// Send emails
function sendEmails() {
  const content = editor.innerHTML.trim();
  const statusDiv = document.getElementById("status");

  if(!content){
    statusDiv.style.color="red";
    statusDiv.innerText="‚ö†Ô∏è Type a message or paste media first.";
    return;
  }

  statusDiv.style.color="black";
  statusDiv.innerText="‚è≥ Sending emails...";

  let success=0, fail=0;

  subscribers.forEach(sub => {
    const templateParams = {
      to_email: sub.email,
      name: sub.name,
      update_message: buildHTMLTemplate(content)
    };

    emailjs.send(serviceId, templateId, templateParams)
      .then(() => {
        success++;
        statusDiv.style.color="green";
        statusDiv.innerText=`‚úÖ Sent: ${success}, ‚ùå Failed: ${fail}`;
      })
      .catch(() => {
        fail++;
        statusDiv.style.color="red";
        statusDiv.innerText=`‚úÖ Sent: ${success}, ‚ùå Failed: ${fail}`;
      });
  });
}
</script>

</body>
</html>
